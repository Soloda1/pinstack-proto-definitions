syntax = "proto3";

package relation.v1;

option go_package = "pinstack-proto-definitions/relation/v1;relationv1";

service RelationService {
  rpc Follow(FollowRequest) returns (FollowResponse);
  rpc Unfollow(UnfollowRequest) returns (UnfollowResponse);
  rpc GetFollowers(GetFollowersRequest) returns (GetFollowersResponse);
  rpc GetFollowees(GetFolloweesRequest) returns (GetFolloweesResponse);
}

message FollowRequest {
  int64 follower_id = 1;
  int64 followee_id = 2;
}

message FollowResponse {
}

message UnfollowRequest {
  int64 follower_id = 1;
  int64 followee_id = 2;
}

message UnfollowResponse {
}

message User {
  int64 follower_id = 1;
  string username = 2;
  optional string avatar_url = 3;
}

message GetFollowersRequest {
  int64 followee_id = 1;
  int32 limit = 2;
  int32 page = 3;
}

message GetFollowersResponse {
  repeated User followers = 1;
  int64 total = 2;
}

message GetFolloweesRequest {
  int64 follower_id = 1;
  int32 limit = 2;
  int32 page = 3;
}

message GetFolloweesResponse {
  repeated User followees = 1;
  int64 total = 2;
}
